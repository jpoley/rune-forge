# Rune Forge Environment Configuration
# Copy this to .env and fill in values

# =============================================================================
# Server Configuration
# =============================================================================

# Port to run the server on
PORT=41204

# Path to built client files (relative to server or absolute)
CLIENT_DIR=../client/dist

# Environment mode: development or production
NODE_ENV=development

# =============================================================================
# Database Configuration
# =============================================================================

# Path to SQLite database file (default: data/rune-forge.db)
DB_PATH=data/rune-forge.db

# =============================================================================
# Authentication Configuration
# =============================================================================

# Enable authentication (set to "true" for production)
# When disabled, uses development mock auth
AUTH_ENABLED=false

# Pocket ID OIDC Provider Settings
# Internal URL for server-to-server communication
POCKET_ID_URL=http://localhost:1411

# Public URL that clients redirect to for login
POCKET_ID_PUBLIC_URL=http://localhost:1411

# OAuth client credentials (obtain from Pocket ID admin)
POCKET_ID_CLIENT_ID=your-client-id
POCKET_ID_CLIENT_SECRET=your-client-secret

# Callback URL after OAuth redirect (must match registered redirect URI)
AUTH_CALLBACK_URL=http://localhost:41204/api/auth/callback

# Secret key for signing sessions (generate with: openssl rand -hex 32)
# If not set, a random key is generated on each start (sessions won't persist)
AUTH_SECRET_KEY=

# Session expiry in hours (default: 168 = 7 days)
SESSION_EXPIRE_HOURS=168

# =============================================================================
# Production Settings (Cloudflare Tunnel)
# =============================================================================

# Cloudflare Tunnel token (get from Zero Trust dashboard)
# Create tunnel: cloudflared tunnel create rune-forge
# Configure public hostname in Zero Trust dashboard to point to http://rune-forge:3000
CLOUDFLARE_TUNNEL_TOKEN=

# For production with Cloudflare Tunnel, set these:
#
# NODE_ENV=production
# AUTH_ENABLED=true
# POCKET_ID_PUBLIC_URL=https://auth.yourdomain.com
# AUTH_CALLBACK_URL=https://game.yourdomain.com/api/auth/callback
# CLOUDFLARE_TUNNEL_TOKEN=eyJ...your-token-here
