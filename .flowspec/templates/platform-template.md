# Platform Design: {Feature Name}

**Feature**: {feature-slug}
**Date**: {YYYY-MM-DD}
**Platform Lead**: {name}
**Version**: {version}

## Infrastructure Overview

### Architecture Diagram
```
{ASCII diagram or link to diagram}
```

### Components
| Component | Type | Purpose |
|-----------|------|---------|
| {component} | {service/database/cache/etc} | {purpose} |

### Technology Stack
| Layer | Technology | Version |
|-------|------------|---------|
| Runtime | {e.g., Node.js, Python} | {version} |
| Framework | {e.g., FastAPI, Express} | {version} |
| Database | {e.g., PostgreSQL} | {version} |
| Cache | {e.g., Redis} | {version} |
| Message Queue | {e.g., RabbitMQ} | {version} |

## Deployment Architecture

### Environment Strategy
| Environment | Purpose | Configuration |
|-------------|---------|---------------|
| Development | Local development | {config notes} |
| Staging | Pre-production testing | {config notes} |
| Production | Live traffic | {config notes} |

### Container Configuration
```yaml
# Example container resources
resources:
  requests:
    cpu: {cpu}
    memory: {memory}
  limits:
    cpu: {cpu}
    memory: {memory}
```

### Deployment Strategy
- [ ] Rolling Update
- [ ] Blue-Green
- [ ] Canary
- [ ] Feature Flags

**Rollback Plan**: {Description of rollback procedure}

## Scalability Requirements

### Expected Load
| Metric | Current | 6 Month | 12 Month |
|--------|---------|---------|----------|
| Requests/sec | {rps} | {rps} | {rps} |
| Concurrent Users | {count} | {count} | {count} |
| Data Volume | {size} | {size} | {size} |

### Scaling Strategy
| Component | Scaling Type | Triggers |
|-----------|--------------|----------|
| {component} | Horizontal/Vertical | {metrics/thresholds} |

### Auto-scaling Configuration
```yaml
# Example HPA configuration
minReplicas: {min}
maxReplicas: {max}
metrics:
  - type: Resource
    resource:
      name: cpu
      targetAverageUtilization: {percentage}
```

## Security Considerations

### Network Security
| Control | Implementation |
|---------|----------------|
| Ingress | {firewall rules/WAF} |
| Egress | {allowed destinations} |
| Service Mesh | {mTLS configuration} |

### Secrets Management
| Secret Type | Storage | Rotation |
|-------------|---------|----------|
| API Keys | {vault/k8s secrets} | {frequency} |
| Database Credentials | {vault/k8s secrets} | {frequency} |
| TLS Certificates | {cert-manager/manual} | {frequency} |

### Compliance Requirements
- [ ] SOC 2
- [ ] GDPR
- [ ] HIPAA
- [ ] PCI-DSS

## Monitoring and Observability

### Metrics
| Metric | Type | Alert Threshold |
|--------|------|-----------------|
| Request latency (p99) | Histogram | > {ms} |
| Error rate | Counter | > {%} |
| CPU utilization | Gauge | > {%} |
| Memory utilization | Gauge | > {%} |

### Logging
| Log Type | Retention | Storage |
|----------|-----------|---------|
| Application | {days} | {destination} |
| Access | {days} | {destination} |
| Audit | {days} | {destination} |

### Tracing
- **Provider**: {Jaeger/Zipkin/Datadog/etc}
- **Sampling Rate**: {percentage}
- **Retention**: {days}

### Alerting
| Alert | Severity | Channel | Runbook |
|-------|----------|---------|---------|
| {alert name} | {P1/P2/P3} | {Slack/PagerDuty} | {link} |

## Disaster Recovery

### Backup Strategy
| Data | Frequency | Retention | Location |
|------|-----------|-----------|----------|
| Database | {frequency} | {days} | {location} |
| Configuration | {frequency} | {days} | {location} |

### RTO/RPO
| Tier | RTO | RPO |
|------|-----|-----|
| Critical | {time} | {time} |
| Standard | {time} | {time} |

### Failover Procedure
1. {Step 1}
2. {Step 2}
3. {Step 3}

## Cost Estimation

### Infrastructure Costs
| Resource | Quantity | Unit Cost | Monthly Cost |
|----------|----------|-----------|--------------|
| Compute | {count} | ${cost} | ${total} |
| Storage | {GB} | ${cost}/GB | ${total} |
| Network | {GB} | ${cost}/GB | ${total} |
| **Total** | | | **${total}** |

### Cost Optimization Opportunities
- {Opportunity 1}
- {Opportunity 2}

## Dependencies

### External Services
| Service | Purpose | SLA | Fallback |
|---------|---------|-----|----------|
| {service} | {purpose} | {uptime %} | {fallback strategy} |

### Internal Services
| Service | Purpose | Owner |
|---------|---------|-------|
| {service} | {purpose} | {team} |

## Implementation Checklist

- [ ] Infrastructure provisioned
- [ ] CI/CD pipeline configured
- [ ] Monitoring dashboards created
- [ ] Alerting rules configured
- [ ] Runbooks documented
- [ ] DR tested
- [ ] Security review completed

---

**Generated by**: `/flow:plan`
